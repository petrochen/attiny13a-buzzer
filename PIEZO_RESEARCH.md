# Исследование АЧХ пьезо-баззеров

> Результаты исследования частотных характеристик пьезоэлектрических баззеров для проекта Lost Model Buzzer.

## Основные выводы

### 1. Резонансная природа пьезо

Пьезо-баззеры **не имеют плоской АЧХ**. Они работают на принципе резонанса:

- **Один основной резонанс** в диапазоне 2-5 kHz (типично 3-4 kHz)
- **Узкая полоса пропускания** — ±200 Hz вокруг резонанса (high Q factor)
- **Резкий спад** громкости вне резонансной частоты

```
      SPL (dB)
         │      ╱╲
         │     ╱  ╲
         │    ╱    ╲      ← ширина ~200-500 Hz
         │   ╱      ╲
         │──╱────────╲────────
         │
         └──────────────────── Freq (Hz)
              2.5k  3k  3.5k
                    ↑
               резонанс
```

### 2. Множественные моды вибрации

Пьезо-диски имеют несколько мод вибрации:
- **Радиальная мода** (radial mode)
- **Толщинная мода** (thickness mode)
- **Краевая мода** (edge mode)
- **Сдвиговая мода** (thickness shear mode)

Каждая мода имеет свою резонансную частоту. На практике это выглядит как несколько "пиков" на АЧХ.

### 3. Экспериментальные данные нашего пьезо

Анализ с шагом 10 Hz показал что пьезо "прилипает" к дискретным резонансам:

| Входной диапазон | Detected частота | Мода |
|------------------|------------------|------|
| 2400-2480 Hz | 2422 Hz | #1 |
| 2490-2560 Hz | 2508 Hz | #2 |
| 2570-2650 Hz | 2605 Hz | #3 |
| 2660-2750 Hz | 2702 Hz | #4 |
| 2760-2860 Hz | 2799-2810 Hz | #5 |
| 2870-2990 Hz | 2917 Hz | #6 |

**Расстояние между модами: ~86-97 Hz** (в среднем ~90 Hz)

### 4. Влияние на калибровку

Поскольку пьезо имеет дискретные резонансы с шагом ~100 Hz:
- Шаг калибровки **10 Hz бессмыслен** — пьезо всё равно выдаёт только свои резонансы
- Шаг **100 Hz оптимален** — попадает между резонансами
- Шаг **25 Hz избыточен** — не даёт дополнительной точности

### 5. Ограничения FFT анализа

```
Sample rate: 44100 Hz
Block size: 4096 samples
FFT resolution: 44100/4096 ≈ 10.7 Hz
```

FFT не может различить частоты ближе чем ~10 Hz. Это ещё одна причина почему мелкий шаг не помогает.

## Рекомендации по выбору частоты

### Громкость vs Проникновение

| Фактор | Низкие (2400-2700 Hz) | Высокие (2800-3200 Hz) |
|--------|----------------------|------------------------|
| Громкость в воздухе | Средняя | Выше |
| Проникновение через траву | ✓ Лучше | ✗ Хуже |
| Дальность слышимости | ✓ Дальше | ✗ Ближе |
| Точность воспроизведения | ✓ Точнее | Может искажаться |
| Гармоники | ✓ Богаче | Беднее |

### Гармоники

Тон с несколькими гармониками (2x, 3x, 4x основной частоты) легче локализовать на слух. Низкие частоты обычно имеют более богатый гармонический спектр.

### Итоговая рекомендация

Для Lost Model Buzzer оптимальный диапазон: **2500-2700 Hz**
- Хорошая громкость
- Лучшее проникновение через траву
- Точное воспроизведение пьезо
- Достаточно гармоник для локализации

## Источники

### Резонанс пьезо
- [Piezo Resonance Experiment - CSpark Research](https://csparkresearch.in/expeyes17/sound/piezo-resonance.html)
  - Резонанс ~3500 Hz, bell-shaped curve
  - Варьируется от образца к образцу
  - Добавление массы снижает резонансную частоту

### АЧХ и SPL
- [Same Sky - Resonance in Audio Design](https://www.sameskydevices.com/blog/understanding-the-impact-of-resonance-and-resonant-frequency-in-audio-design)
  - Пьезо: 1-5 kHz, узкая полоса
  - Выше SPL чем магнитные баззеры при том же токе

### Множественные моды
- [ResearchGate - Vibration modes in piezoelectric disks](https://www.researchgate.net/figure/Modes-of-vibration-in-piezoelectric-disks-D-t20-except-radial-and-bar-modes-a-radial_fig3_254401362)
  - Radial, thickness, edge, shear modes
  - D/t ratio влияет на распределение мод

### Q-фактор и полоса пропускания
- [Parallax Forums - Piezo frequency response](https://forums.parallax.com/discussion/125763/frequency-response-of-a-piezo-speaker)
  - High Q = узкая полоса, резкий пик
  - Bandwidth типично ±200 Hz

### Datasheet примеры
- [TDK Piezoelectric Buzzer Selection Guide](https://product.tdk.com/en/products/selectionguide/piezo-buzzer.html)
  - Резонанс 2.0-4.1 kHz в зависимости от модели
  - SPL 68-80 dB @ 10cm

- [Murata Piezoelectric Components](https://www.murata.com/~/media/webrenewal/support/library/catalog/products/sound/p15e.ashx)
  - Резонанс 2.0-3.8 kHz
  - SPL увеличивается на 6 dB при удвоении напряжения

## Эксперименты

### Методология
1. ATtiny13A генерирует square wave заданной частоты
2. Микрофон MacBook записывает звук
3. Python скрипт делает FFT анализ
4. Определяется peak frequency и dB

### Файлы данных
- `buzzer_analysis_20260103_122142.csv` — sweep 25 Hz step
- `buzzer_analysis_20260103_123034.csv` — sweep 10 Hz step

### Инструменты
- `buzzer_analyzer.py` — real-time spectrum analyzer
- `analyze_spectrum.py` — анализ Phyphox CSV экспорта

---

*Исследование проведено в рамках проекта ATtiny13A Lost Model Buzzer, январь 2026*
